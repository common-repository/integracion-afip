(()=>{"use strict";var e,t;e=wc_afip_helper_settings,t=wc_afip_translation_texts,window.afipHelper={addNotice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";const n=afipHelper.addPermanentNotice(e,t);setTimeout((function(){me(n).fadeOut()}),3e3)},addPermanentNotice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.createElement("p");return n.innerText=e,n.style.display="none",n.classList="afip-javascript-notice "+t,document.querySelector("#wpcontent").appendChild(n),me(n).fadeIn(null,1),n},removePermanentNotices(){any(".afip-javascript-notice").fadeOut(null,1)},popupWithIframe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=open("","afipPopup","width=1024, height=768, location=no");n.document.title=t||"";let o=n.document.createElement("iframe");return o.style.width="100%",o.style.height="100vh",o.src=e,n.document.body.appendChild(o),n},popupWithUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=open(e,"afipPopup","width=1024, height=768, location=no");return n.document.title=t||"",n},b64ToBlob(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512;const o=window.atob(e),a=[];for(let e=0;e<o.length;e+=n){const t=o.slice(e,e+n),i=new Array(t.length);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);const l=new Uint8Array(i);a.push(l)}return new Blob(a,{type:t})},async sendRequest(n,o,a){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l={failCallback:e=>afipHelper.addNotice(e,"error"),useError:!1,errorMessage:null,loadingNotice:!1,button:null,body:null,genericErrorMessage:t.generic_error_try_again,...i};let{failCallback:r,useError:s,errorMessage:c,loadingNotice:d,button:p,body:u,genericErrorMessage:h}=l,g=null;p&&(g=p.textContent,p.textContent=t.loading,p.classAdd("disabled")),d&&afipHelper.addPermanentNotice(t.loading,"warning");try{const t=`${e.store_url}/wp-json/afip-for-woocommerce/v1`;let i=await fetch(t+o,{method:n,headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},body:u?JSON.stringify(u):null});if(d&&afipHelper.removePermanentNotices(),!i.ok)return r(c??s?i.data??h:h),void(p&&(p.textContent=g,p.classRemove("disabled")));204!==i.status&&(i=await i.json()),a(i)}catch(e){r(c??s?e:h)}finally{p&&(p.textContent=g,p.classRemove("disabled"))}}}})();